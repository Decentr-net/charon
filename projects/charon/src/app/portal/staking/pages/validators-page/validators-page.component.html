<app-staking-layout
  *transloco="let translate; read: 'staking.validators_page'"
>
  <ng-container ngProjectAs="[card-title]">
    {{ translate('title') }}
  </ng-container>

  <div
    class="validators-page__header-section"
    ngProjectAs="[card-show-more]"
  >
    <mat-slide-toggle [formControl]="onlyBondedFormControl">
      {{ translate('show_only_active') }}
    </mat-slide-toggle>

    <div class="validators-page__header-section__divider"></div>

    <div
      *ngIf="(totalDelegatorRewards$ | async) !== undefined; else totalDelegatorRewardsLoading"
      class="validators-page__header-section__withdraw"
      appTypeface="paragraph"
    >
      {{ translate('reward') }}: {{ totalDelegatorRewards$ | async | microValue | numberFormat : '1.0-6' : true }}
      <app-currency-symbol></app-currency-symbol>
    </div>

    <a [routerLink]="stakingRoute.Withdraw">
      <button
        class="validators-page__header-section__withdraw-button"
        appTypeface="caption"
        app-button
        [light]="true"
        size="xs"
      >
        <svg-icon
          key="get-coin"
          size="xs"
        ></svg-icon>
        {{ translate('withdraw') }}
      </button>
    </a>
  </div>

  <app-validators-table
    class="validators-page__table"
    ngProjectAs="[card-body]"
    *ngIf="validators$ | async as validators; else tablesLoading;"
    [data]="validators"
  ></app-validators-table>
</app-staking-layout>

<ng-template #tablesLoading>
  <ngx-skeleton-loader
    class="validators-page__loading"
    count="10"
    [theme]="{
      height: '40px',
      width: '100%'
    }"
  ></ngx-skeleton-loader>
</ng-template>

<ng-template #totalDelegatorRewardsLoading>
  <ngx-skeleton-loader
    [theme]="{
      display: 'flex',
      height: '24px',
      marginBottom: '0px',
      width: '170px'
    }"
  ></ngx-skeleton-loader>
</ng-template>
