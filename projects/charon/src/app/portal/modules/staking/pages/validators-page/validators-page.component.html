<app-staking-layout
  *transloco="let translate; read: 'staking.validators_page'"
>
  <ng-container ngProjectAs="[card-title]">
    {{ translate('title') }}
  </ng-container>

  <div
    class="validators-page__header-section"
    ngProjectAs="[card-show-more]"
  >
    <mat-slide-toggle [formControl]="onlyBondedFormControl">
      {{ translate('show_only_active') }}
    </mat-slide-toggle>

    <div class="validators-page__header-section__divider"></div>

    <a [routerLink]="stakingRoute.Withdraw">
      <button
        class="validators-page__header-section__withdraw"
        appTypeface="caption"
        app-button
        [light]="true"
        size="sm"
      >
        <div
          *ngIf="totalDelegatorRewards !== undefined; else totalDelegatorRewardsLoading"
          class="validators-page__header-section__reward"
        >
          {{ translate('reward') }}:

          <ng-container *ngIf="totalDelegatorRewards >= 1 || !totalDelegatorRewards; else lessThanOneUdec">
            {{ totalDelegatorRewards | microValue | numberFormat : '1.0-6' : true }}
          </ng-container>
          <app-currency-symbol></app-currency-symbol>
        </div>

        <div class="validators-page__header-section__withdraw__divider"></div>

        <div class="validators-page__header-section__withdraw-button">
          <svg-icon
            key="get-coin"
            size="xs"
          ></svg-icon>

          {{ translate('withdraw') }}
        </div>
      </button>
    </a>
  </div>

  <app-validators-table
    class="validators-page__table"
    ngProjectAs="[card-body]"
    *ngIf="validators$ | async as validators; else tablesLoading;"
    [data]="validators"
    [userValidatorAddress]="userValidatorAddress$ | async"
    (validatorRewardClick)="onValidatorRewardClick($event)"
  ></app-validators-table>
</app-staking-layout>

<ng-template #tablesLoading>
  <ngx-skeleton-loader
    class="validators-page__loading"
    count="10"
    [theme]="{
      height: '40px',
      width: '100%'
    }"
  ></ngx-skeleton-loader>
</ng-template>

<ng-template #totalDelegatorRewardsLoading>
  <ngx-skeleton-loader
    [theme]="{
      display: 'flex',
      height: '16px',
      marginBottom: '0px',
      width: '140px'
    }"
  ></ngx-skeleton-loader>
</ng-template>

<ng-template #lessThanOneUdec>
  <{{ 1 | microValue }}
</ng-template>
