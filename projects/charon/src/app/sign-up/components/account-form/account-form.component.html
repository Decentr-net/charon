<form
  [attr.id]="formId"
  class="account-form__form"
  *transloco="let translate; read: 'sign_up.account_form_page.form'"
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  appSubmitSource
>
  <section class="account-form__section">
    <div
      class="account-form__section__title"
      appTypeface="subheader"
    >
      {{ translate('email.title') }}
    </div>

    <div
      class="account-form__section__subtitle"
      appTypeface="paragraph"
    >
      {{ translate('email.subtitle') }}
    </div>

    <app-input-container class="account-form__form-field">
      <app-input
        class="account-form__input"
        formControlName="email"
      >
        <ng-container ngProjectAs="[label]">
          {{ translate('email.label') }}
        </ng-container>
      </app-input>

      <app-form-error controlName="email" i18nControlKey="email"></app-form-error>
    </app-input-container>
  </section>

  <section class="account-form__section">
    <div
      class="account-form__section__title"
      appTypeface="subheader"
    >
      {{ translate('password.title') }}
    </div>

    <app-password-validation-state
      class="account-form__section__subtitle"
      [password]="passwordControl.value"
      [translationsConfig]="{ read: 'shared.password.validation_state', scope: 'shared' }"
    ></app-password-validation-state>

    <app-password-form
      class="account-form__form-field"
      [translationsConfig]="{ read: 'core.profile_form', scope: 'core' }"
      formControlName="password"
      [required]="true"
    ></app-password-form>

    <app-input-container class="account-form__form-field">
      <app-checkbox
        formControlName="agreeTerms"
      >
        {{ translate('terms_of_use.have_read') }}
        <a
          class="account-form__link"
          href="https://decentr.net/terms.html"
          target="_blank"
        >
          {{ translate('terms_of_use.link') }}
        </a>
      </app-checkbox>

      <app-form-error controlName="agreeTerms" i18nControlKey="terms_of_use"></app-form-error>
    </app-input-container>
  </section>
</form>

<div *transloco="let translate; read: 'sign_up.account_form_page'">
  <div class="account-form__divider"></div>

  <div class="account-form__actions">
    <button
      class="account-form__action-button"
      app-button
      color="grey"
      (click)="onBack()"
    >
      {{ translate('back') }}
    </button>

    <button
      class="account-form__action-button"
      app-button
      type="submit"
      [attr.form]="formId"
    >
      {{ translate('submit') }}
    </button>
  </div>
</div>
